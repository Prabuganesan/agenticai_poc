

# AUTONOMOUS_DATA_PATH=/path/to/your/data
# Base path for all autonomous server data (database, uploads, logs, encryption keys, API keys, etc.)
# If not set, defaults to: packages/server/.autonomous
# All data will be stored in: AUTONOMOUS_DATA_PATH/.autonomous/
AUTONOMOUS_DATA_PATH=






############################################## SECRET KEYS #################################################
############################################################################################################
# Encryption Key Configuration
# Encryption key is automatically stored in: {AUTONOMOUS_DATA_PATH}/.autonomous/encryption.key
# Auto-generated on first startup if not present
# For cluster environments (Podman/PM2): Set AUTONOMOUS_DATA_PATH to shared volume path
# Example: AUTONOMOUS_DATA_PATH=/shared/autonomous-data

# End-to-End Encryption (Request/Response/SSE)
# Enable encryption for all API requests, responses, and SSE streaming
# Default: true (disabled for local development)
ENABLE_E2E_ENCRYPTION=true

# TOON Format Integration
# Enable TOON format processing for LLM inputs and outputs
# Default: true
ENABLE_TOON_FORMAT=true





############################################## LOGGING #####################################################
############################################################################################################


# ============================================
# Logging Flag Configuration
# ============================================
# Global master switch for all logging (default: true)
LOG_ENABLED=true

# Group-level flags (all default to true if not set)
LOG_SYSTEM_ENABLED=true
LOG_WORKFLOWS_ENABLED=true
LOG_SERVICES_ENABLED=true
LOG_STORAGE_ENABLED=true
LOG_INFRASTRUCTURE_ENABLED=true


############################################## STORAGE #####################################################
############################################################################################################


STORAGE_TYPE=local
# S3_STORAGE_BUCKET_NAME=autonomous
# S3_STORAGE_ACCESS_KEY_ID=<your-access-key>
# S3_STORAGE_SECRET_ACCESS_KEY=<your-secret-key>
# S3_STORAGE_REGION=us-west-2
# S3_ENDPOINT_URL=<custom-s3-endpoint-url>
# S3_FORCE_PATH_STYLE=false
# GOOGLE_CLOUD_STORAGE_CREDENTIAL=/the/keyfilename/path
# GOOGLE_CLOUD_STORAGE_PROJ_ID=<your-gcp-project-id>
# GOOGLE_CLOUD_STORAGE_BUCKET_NAME=<the-bucket-name>
# GOOGLE_CLOUD_UNIFORM_BUCKET_ACCESS=true


############################################## SETTINGS ####################################################
############################################################################################################


# NUMBER_OF_PROXIES= 1
CORS_ORIGINS=
IFRAME_ORIGINS=
CHATBOT_IFRAME_ORIGINS=
# AUTONOMOUS_FILE_SIZE_LIMIT=50mb
SHOW_COMMUNITY_NODES= true
DISABLE_AUTONOMOUS_TELEMETRY= true
# DISABLED_NODES=bufferMemory,chatOpenAI (comma separated list of node names to disable)
# Uncomment the following line to enable model list config, load the list of models from your local config file
MODEL_LIST_CONFIG_JSON=../components/models.json


############################################ AUTH PARAMETERS ###############################################
############################################################################################################


# APP_URL=http://localhost:3030

# SMTP_HOST=smtp.host.com
# SMTP_PORT=465
# SMTP_USER=smtp_user
# SMTP_PASSWORD=smtp_password
# SMTP_SECURE=true
# ALLOW_UNAUTHORIZED_CERTS=false
# SENDER_EMAIL=team@example.com

# JWT_AUTH_TOKEN_SECRET=
# JWT_REFRESH_TOKEN_SECRET=
# JWT_ISSUER=
# JWT_AUDIENCE=
# JWT_TOKEN_EXPIRY_IN_MINUTES=
# JWT_REFRESH_TOKEN_EXPIRY_IN_MINUTES=
# EXPIRE_AUTH_TOKENS_ON_RESTART=true # (if you need to expire all tokens on app restart)
# EXPRESS_SESSION_SECRET=autonomous
# SECURE_COOKIES=

# INVITE_TOKEN_EXPIRY_IN_HOURS=24
# PASSWORD_RESET_TOKEN_EXPIRY_IN_MINS=15
# PASSWORD_SALT_HASH_ROUNDS=10
# TOKEN_HASH_SECRET='popcorn'

# WORKSPACE_INVITE_TEMPLATE_PATH=/path/to/custom/workspace_invite.hbs


############################################# ENTERPRISE ###################################################
############################################################################################################


# LICENSE_URL=
# AUTONOMOUS_LICENSE_KEY=
# OFFLINE=


########################################### METRICS COLLECTION #############################################
############################################################################################################


# POSTHOG_PUBLIC_API_KEY=your_posthog_public_api_key

ENABLE_METRICS=true
METRICS_PROVIDER=prometheus
METRICS_INCLUDE_NODE_METRICS=true  
METRICS_SERVICE_NAME=Autonomous

# ONLY NEEDED if METRICS_PROVIDER=open_telemetry
# METRICS_OPEN_TELEMETRY_METRIC_ENDPOINT=http://localhost:4318/v1/metrics
# METRICS_OPEN_TELEMETRY_PROTOCOL=http # http | grpc | proto (default is http)
# METRICS_OPEN_TELEMETRY_DEBUG=true # default is false


############################################### PROXY ######################################################
############################################################################################################


# Uncomment the following lines to enable global agent proxy, see https://www.npmjs.com/package/global-agent for more details
# GLOBAL_AGENT_HTTP_PROXY=CorporateHttpProxyUrl
# GLOBAL_AGENT_HTTPS_PROXY=CorporateHttpsProxyUrl
# GLOBAL_AGENT_NO_PROXY=ExceptionHostsToBypassProxyIfNeeded


########################################### QUEUE CONFIGURATION ############################################
############################################################################################################


 MODE=queue #(queue | main)
 QUEUE_NAME=autonomous-queue
 REDIS_DB_QUEUE=3  #redis db number
 WORKER_CONCURRENCY=20
 REMOVE_ON_AGE=86400
 REMOVE_ON_COUNT=1000
 ENABLE_BULLMQ_DASHBOARD=true
 REDIS_KEEP_ALIVE=10000 


# QUEUE_REDIS_EVENT_STREAM_MAX_LEN=100000# QUEUE_REDIS_EVENT_STREAM_MAX_LEN=100000
# REDIS_TLS=
# REDIS_CERT=
# REDIS_KEY=
# REDIS_CA=


############################################## SECURITY ####################################################
############################################################################################################


# HTTP_DENY_LIST=
# CUSTOM_MCP_SECURITY_CHECK=true
# CUSTOM_MCP_PROTOCOL=sse #(stdio | sse)
# TRUST_PROXY=true #(true | false | 1 | loopback| linklocal | uniquelocal | IP addresses | loopback, IP addresses)


########################################### DOCUMENT LOADERS ###############################################
############################################################################################################


# PUPPETEER_EXECUTABLE_FILE_PATH='C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe'
# PLAYWRIGHT_EXECUTABLE_FILE_PATH='C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe'



############################################## DATABASE ####################################################
############################################################################################################

# Main PostgreSQL Connection (for fetching org configs)
MAIN_DB_HOST=
MAIN_DB_PORT=
MAIN_DB_DATABASE=
MAIN_DB_USER=
MAIN_DB_PASSWORD=
MAIN_DB_TYPE=
DB_POOL_SIZE=
DB_SSL=

# Database Table Creation
# Enable automatic table creation at application startup
# Default: Not set (table creation is skipped)
# Set to "true" to enable automatic table creation
# ENABLE_TABLE_CREATION=true
# USE_LOCAL_DB=false

#################################### AUTONOMOUS SERVER MIGRATION ##########################################
############################################################################################################

# Application Short Codes (from main server)
APPBUILDER_SHORT_CODE=
APPDESIGNER_SHORT_CODE=
APPPUBLISHER_SHORT_CODE=

# Redis Database Numbers
# Note: Only session DB is used. Autonomous has its own queue system.
REDIS_DB_SESSION=1 #redis db number

# Server Configuration
SERVER_HOST=
SERVER_PORT=
CONTEXT_PATH=
PROXY_URL=

# Session Configuration
SESSION_COOKIE_MAX_AGE=900
SESSION_COOKIE_DOMAIN=
SESSION_COOKIE_PATH=/
SESSION_COOKIE_HTTP_ONLY=true
SESSION_COOKIE_SECURE=false
SESSION_COOKIE_SAME_SITE=lax

# Skip Designer Service (for local development)
# Set to 'true' to use userinput.json file instead of calling designer service
# Useful for local testing without running the full Chainsys infrastructure
# Default: false (use designer service)
SKIP_DESIGNER_SERVICE=false

# License Code (for password decryption)
LICENSE_CODE=

# Simple Crypto Key (for localStorage encryption)
SIMPLE_CRYPTO_KEY=

# Server Deployment Configuration
SERVER_MODE=
SERVER_CLUSTER_MODE=
SERVER_INSTANCES=
SERVER_TARGET_SERVER=
SERVER_DEPLOY_PATH=

# CouchDB Configuration
COUCHDB_DATABASE_CONFIG=config
COUCHDB_DATABASE_MAIN_DATA=mobile_platform



# Log Sanitization - Fields to sanitize in request/response logs
LOG_SANITIZE_BODY_FIELDS=password,pwd,pass,secret,token,apikey,api_key,accesstoken,access_token,refreshtoken,refresh_token,clientsecret,client_secret,privatekey,private_key,secretkey,secret_key,auth,authorization,credential,credentials
LOG_SANITIZE_HEADER_FIELDS=authorization,x-api-key,x-auth-token,cookie
